<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Crushing Design Patterns with Scala! — Chain of responsibility - LPRAKASHV CODE BYTES</title><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><meta name=viewport content="width=device-width,initial-scale=1"><script async src="https://www.googletagmanager.com/gtag/js?id=G-DNE09NG226"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-DNE09NG226")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3468549466738898" crossorigin=anonymous></script><meta name=description content="Starting this chain of responsibility of debunking the idea of really needing to use theDesign Patterns!. I believe that design patterns were created to standardise the OO patterns needed to solve the common problems arising due to not having a standard way of solving them using the programming language itself.
Design patterns should be used only as communication tool and not the way we have been using as a design tool."><meta property="og:image" content><meta property="og:title" content="Crushing Design Patterns with Scala! — Chain of responsibility"><meta property="og:description" content="Starting this chain of responsibility of debunking the idea of really needing to use theDesign Patterns!. I believe that design patterns were created to standardise the OO patterns needed to solve the common problems arising due to not having a standard way of solving them using the programming language itself.
Design patterns should be used only as communication tool and not the way we have been using as a design tool."><meta property="og:type" content="article"><meta property="og:url" content="https://www.lprakashv.com/posts/2019-09-26_crushing-design-patterns-with-scalachain-of-responsibility/"><meta property="og:image" content="https://www.lprakashv.com/posts/2019-09-26_crushing-design-patterns-with-scalachain-of-responsibility/images/1.jpeg"><meta property="og:image" content="https://www.lprakashv.com/posts/2019-09-26_crushing-design-patterns-with-scalachain-of-responsibility/images/2.gif"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-09-26T06:06:23+00:00"><meta property="article:modified_time" content="2022-08-13T01:14:45+05:30"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.lprakashv.com/posts/2019-09-26_crushing-design-patterns-with-scalachain-of-responsibility/images/1.jpeg"><meta name=twitter:title content="Crushing Design Patterns with Scala! — Chain of responsibility"><meta name=twitter:description content="Starting this chain of responsibility of debunking the idea of really needing to use theDesign Patterns!. I believe that design patterns were created to standardise the OO patterns needed to solve the common problems arising due to not having a standard way of solving them using the programming language itself.
Design patterns should be used only as communication tool and not the way we have been using as a design tool."><script src=https://www.lprakashv.com/js/feather.min.js></script>
<link href=https://www.lprakashv.com/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://www.lprakashv.com/css/main.42a94afe1d883ff4fcef4d850a21c8e0c6903e7b33798d5ca18916cbd645a78a.css></head><body><div class=content-side><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3468549466738898" crossorigin=anonymous></script>
<ins class=adsbygoogle style=display:block data-ad-client=ca-pub-3468549466738898 data-ad-slot=6861065745 data-ad-format=auto data-full-width-responsive=true></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class=content><header><div class=main><div style=display:flex;flex-direction:row><img src="../../LPRAKASHV CODE BYTES-logos_transparent.png" style=border-color:#fff;border-radius:10px;width:150px><div style=margin:auto><a href=https://www.lprakashv.com/ style=font-size:30px;font-weight:700>LPRAKASHV CODE BYTES</a></div></div></div><nav><a href=../../>Home</a>
<a href=../../posts>All posts</a>
<a href=../../about>About</a>
<a href=../../tags>Tags</a></nav></header><main><article><div class=title><h1 class=title>Crushing Design Patterns with Scala! — Chain of responsibility</h1><div class=meta>Posted on Sep 26, 2019</div></div><section class=body><p><img src=../../posts/2019-09-26_crushing-design-patterns-with-scalachain-of-responsibility/images/1.jpeg#layoutTextWidth alt=image></p><p><strong><em>Starting this chain of responsibility of debunking the idea of really needing to use the</em></strong><a href=https://en.wikipedia.org/wiki/Design_Patterns><strong><em>Design Patterns</em></strong></a><strong><em>!</em></strong>. I believe that design patterns were created to standardise the OO patterns needed to solve the common problems arising due to not having a standard way of solving them using the programming language itself.</p><blockquote><p>Design patterns should be used only as communication tool and not the way we have been using as a design tool. — Mr. <a href=https://twitter.com/venkat_s>Venkat Subramaniam</a></p></blockquote><p>Coming on to our language, <strong>Scala, being a multi-paradigm programming language gets the goodness of both functional and OO worlds</strong>. This is truly visible with the functional magic being applied in the OO design patterns.</p><p>We will start with our pattern “Chain of Responsibility”, its definition says:</p><blockquote><p>In object-oriented design, the <strong>chain-of-responsibility pattern</strong> is a design pattern consisting of a source of command objects and a series of processing objects. Each processing object contains logic that defines the types of command objects that it can handle; the rest are passed to the next processing object in the chain. A mechanism also exists for adding new processing objects to the end of this chain> - Wikipedia
<img src=../../posts/2019-09-26_crushing-design-patterns-with-scalachain-of-responsibility/images/2.gif#layoutTextWidth alt=image></p></blockquote><p><strong><em>To put it simply, the chain of responsibility pattern can be considered as an assembly line, each processing unit doing their own part and then passing the other processing units.</em></strong></p><p>Let’s consider a problem to solve. Consider You want to filter out (beep) profanity out of a public chat system (<em>This example is inspired from Mykhailo Kozik’s post</em> <a href=http://mishadoff.com/blog/clojure-design-patterns/#episode-16-chain-of-responsibility><strong><em>Clojure Design Patterns</em></strong><em>.</em></a>).</p><p>Further more, you would only want to <em>beep</em> the profanity coming from a certain respectable person. You can leave the rest of the world with their freedom of expression ;)</p><p>Consider your chat stream looks something like this:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-txt data-lang=txt><span style=display:flex><span>#format: [user] comment
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[Suresh01] Hello!
</span></span><span style=display:flex><span>[RameshXX] Hi Suresh, how are you.
</span></span><span style=display:flex><span>[TheMostRejectableGuyInTown] Yo wazzup people.
</span></span><span style=display:flex><span>[Suresh01] Not you again Ramesh! curse you!
</span></span><span style=display:flex><span>[MrRespectable007] curse all of you, I curse the world!!
</span></span></code></pre></div><p>You would now want to extend this a little further and wanna have provision to log, reject and <em>beep</em> out (transform) certain words.</p><p>Solution:</p><p>Simple! We just need to filter the sh*t out of everything.</p><p>Let me talk a bit in Java now, <em>we will create a Filter abstraction and create Rejector, Moderator, Logger etc implementations of it.</em></p><p>Abstraction for the Filter:</p><script type=application/javascript src=https://gist.github.com/fd7dd335418f3a2b7faeb0ef8deaa3d2/1bb5c74e79ae83fdc26c2fbcb09423cfebbc5b12.js></script><p>Implementations of the Filter:</p><script type=application/javascript src=https://gist.github.com/ac1df3e6a1b04aad4769a570fa4f0af4/0a79c91841c22a60b54f3599697aa346ca87ba3e.js></script><p>Wow, that was some effort for such a simple task!</p><p>Now, let’s use the filters chained to work together in the order we define.</p><script type=application/javascript src=https://gist.github.com/f6ce039c1f1960faa45e3261124722db/928308d0f6e75540cf48460d7cd6e84da29c1170.js></script><p>We could do the exact same thing with Scala too, well, it doesn’t restrict (or force) you from doing what you want! You are free to jump in your own created well.</p><p>If we take a step back and look at the pattern (or rather problem) again, we could see that <strong><em>we just care about the process method and the order in which they are applied.</em></strong></p><p>Since, <strong>functions are the first class citizens in Scala</strong>, we could argue that we just want the methods and not the entire Filter classes, and some way of composing them.</p><p>Voila, we have our answer here, <strong>“functional composition”</strong> using <strong><em>andThen</em></strong>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-scala data-lang=scala><span style=display:flex><span><span style=color:#888>/* For single argument function, andThen method signature looks like */</span>
</span></span><span style=display:flex><span><span style=color:#080;font-weight:700>trait</span> <span style=color:#b06;font-weight:700>Function1</span><span style=color:#333>[</span><span style=color:#339;font-weight:700>-T1</span>, <span style=color:#339;font-weight:700>+R</span><span style=color:#333>]</span> <span style=color:#333>{</span>
</span></span><span style=display:flex><span>  <span style=color:#080;font-weight:700>def</span> apply<span style=color:#333>(</span>v1<span style=color:#080;font-weight:700>:</span> <span style=color:#339;font-weight:700>T1</span><span style=color:#333>)</span><span style=color:#080;font-weight:700>:</span> <span style=color:#339;font-weight:700>R</span>
</span></span><span style=display:flex><span>  <span style=color:#080;font-weight:700>def</span> andThen<span style=color:#333>[</span><span style=color:#339;font-weight:700>A</span><span style=color:#333>](</span>g<span style=color:#080;font-weight:700>:</span> <span style=color:#339;font-weight:700>R</span> <span style=color:#333>=&lt;</span> A<span style=color:#333>)</span><span style=color:#080;font-weight:700>:</span> <span style=color:#339;font-weight:700>T1</span> <span style=color:#333>=&lt;</span> A <span style=color:#080;font-weight:700>=</span> <span style=color:#333>{</span> x <span style=color:#333>=&lt;</span> g<span style=color:#333>(</span>apply<span style=color:#333>(</span>x<span style=color:#333>))</span> <span style=color:#333>}</span>
</span></span><span style=display:flex><span><span style=color:#333>}</span>
</span></span></code></pre></div><p><em>In plain english, it takes function with input type the same as the return type of the current function it is applied on (R) and returning a new type (A) value. andThen passes the result of the current function to the function passed in and then returns output of the passed function.</em></p><p>Some syntactic sugar in Scala:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-scala data-lang=scala><span style=display:flex><span>a<span style=color:#333>.</span>method<span style=color:#333>(</span>b<span style=color:#333>.</span>innerMethod<span style=color:#333>(</span>c<span style=color:#333>)</span>
</span></span><span style=display:flex><span><span style=color:#888>/* is equivalent to */</span>
</span></span><span style=display:flex><span>a method <span style=color:#333>(</span>b innerMethod c<span style=color:#333>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>a<span style=color:#333>.</span>method1<span style=color:#333>(</span>b<span style=color:#333>).</span>method2<span style=color:#333>(</span>c<span style=color:#333>)</span>
</span></span><span style=display:flex><span><span style=color:#888>/* is equivalent to */</span>
</span></span><span style=display:flex><span>a method1 b method2 c
</span></span></code></pre></div><p>Now, using all our magic here,</p><script type=application/javascript src=https://gist.github.com/a8a82dd6ef7d5f1813e3e813a087f0e8/1c179fd7582da567da4aff9831026a95eaec2a98.js></script><p>Pretty neat huh! Remember, there is no magic just some hard work behind the scenes. In our case, it’s the Scala compiler.</p><h2 id=conclusion>Conclusion</h2><p>In conclusion, we shouldn’t have to worry about writing tedious patterns for standard well known problems if the language itself provides them out of the box! We could just take a break from the computer screen and say “Hello world!” literally, in the time we save :)</p><figure><img src=https://c.tenor.com/FxCJGKCeVBIAAAAC/take-a-break-break.gif></figure><p>Thank you! And here is <a href=../2019-09-30_cushing-design-patternsunnecessary-patterns.>Part-II</a>.</p></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=../../tags/design-patterns>design patterns</a></li><li><a href=../../tags/java>java</a></li><li><a href=../../tags/scala>scala</a></li><li><a href=../../tags/chain-of-responsibility>chain of responsibility</a></li></ul></nav></div><div id=disqus_thread></div><script>(function(){var e=document,t=e.createElement("script");t.src="https://lprakashv-tech-blog.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></article></main><footer><div style=display:flex><a class=soc href=https://www.linkedin.com/in/lprakashv/ title=Linkedin><i data-feather=linkedin></i></a>
<a class=border></a><a class=soc href=https://github.com/lprakashv title=GitHub><i data-feather=github></i></a>
<a class=border></a><a class=soc href=https://twitter.com/lprakashv/ title=Twitter><i data-feather=twitter></i></a>
<a class=border></a><a class=soc href="https://stackoverflow.com/users/4066802/lprakashv?tab=profile" title=stackoverflow><i data-feather=stackoverflow></i></a>
<a class=border></a></div><div class=footer-info>2022 © Lalit Prakash Vatsal |</div></footer><script>feather.replace()</script></div><div class=content-side><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3468549466738898" crossorigin=anonymous></script>
<ins class=adsbygoogle style=display:block data-ad-client=ca-pub-3468549466738898 data-ad-slot=6861065745 data-ad-format=auto data-full-width-responsive=true></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></body></html>