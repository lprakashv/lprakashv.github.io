<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Intro to OpenTelemetry - LPRAKASHV CODE BYTES</title><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><meta name=viewport content="width=device-width,initial-scale=1"><script async src="https://www.googletagmanager.com/gtag/js?id=G-DNE09NG226"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-DNE09NG226")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3468549466738898" crossorigin=anonymous></script><meta name=description content="To understand the OpenTelemetry, we need to understand the foundational concept of Observability first.
Observability In the modern day distributed micro-service applications, it is increasingly becoming difficult for developers to monitor and systems with multiple dependencies due the sheer scale and diversity of technologies involved in the system.
This brings the need for a standard way to understand the running system in a more scalable way.
Observability is a methodology to understand a system from the outside without knowing its inner workings."><meta property="og:image" content><meta property="og:title" content="Intro to OpenTelemetry"><meta property="og:description" content="To understand the OpenTelemetry, we need to understand the foundational concept of Observability first.
Observability In the modern day distributed micro-service applications, it is increasingly becoming difficult for developers to monitor and systems with multiple dependencies due the sheer scale and diversity of technologies involved in the system.
This brings the need for a standard way to understand the running system in a more scalable way.
Observability is a methodology to understand a system from the outside without knowing its inner workings."><meta property="og:type" content="article"><meta property="og:url" content="https://www.lprakashv.com/posts/2022-08-24_intro-to-opentelemetry/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-24T00:15:00+05:30"><meta property="article:modified_time" content="2022-08-24T00:15:00+05:30"><meta name=twitter:card content="summary"><meta name=twitter:title content="Intro to OpenTelemetry"><meta name=twitter:description content="To understand the OpenTelemetry, we need to understand the foundational concept of Observability first.
Observability In the modern day distributed micro-service applications, it is increasingly becoming difficult for developers to monitor and systems with multiple dependencies due the sheer scale and diversity of technologies involved in the system.
This brings the need for a standard way to understand the running system in a more scalable way.
Observability is a methodology to understand a system from the outside without knowing its inner workings."><script src=https://www.lprakashv.com/js/feather.min.js></script>
<link href=https://www.lprakashv.com/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://www.lprakashv.com/css/main.42a94afe1d883ff4fcef4d850a21c8e0c6903e7b33798d5ca18916cbd645a78a.css></head><body><div class=content-side><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3468549466738898" crossorigin=anonymous></script>
<ins class=adsbygoogle style=display:block data-ad-client=ca-pub-3468549466738898 data-ad-slot=6861065745 data-ad-format=auto data-full-width-responsive=true></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class=content><header><div class=main><div style=display:flex;flex-direction:row><img src="../../LPRAKASHV CODE BYTES-logos_transparent.png" style=border-color:#fff;border-radius:10px;width:150px><div style=margin:auto><a href=https://www.lprakashv.com/ style=font-size:2vh;font-weight:700>LPRAKASHV CODE BYTES</a></div></div></div><nav><a href=../../>Home</a>
<a href=../../posts>All posts</a>
<a href=../../about>About</a>
<a href=../../tags>Tags</a></nav></header><main><article><div class=title><h1 class=title>Intro to OpenTelemetry</h1><div class=meta>Posted on Aug 24, 2022</div></div><section class=body><p><img src=images/opentelemetry-horizontal-color.png#layoutTextWidth alt=Image></p><p>To understand the OpenTelemetry, we need to understand the foundational concept of <strong>Observability</strong> first.</p><h2 id=observability>Observability</h2><p>In the modern day distributed micro-service applications, it is increasingly becoming difficult for developers to monitor and systems with multiple dependencies due the sheer scale and diversity of technologies involved in the system.</p><p>This brings the need for a standard way to understand the running system in a more scalable way.</p><blockquote><p>Observability is a methodology to understand a system from the outside without knowing its inner workings.</p></blockquote><p>The system is called <strong>&ldquo;observable&rdquo;</strong>, if it the application code is instrumented to emit traces, metrics, and logs.</p><p><img src=images/observability.png alt=observability></p><h2 id=background-history-of-observability-and-opentelemetry>Background History of Observability and OpenTelemetry</h2><p>In the past, there as no standard way in which code was instrumented. And each Observability back-end (Ziplin, Jaeger, Prometheus etc.) had its own instrumentation libraries and agents for emitting data to the tools.</p><p>This meant:</p><ol><li><strong>Lack of Standardized Format:</strong> There was no standardized data format for sending data to an Observability back-end.</li><li><strong>Lack of Portability:</strong> If a user chose to switch Observability back-ends, they would have to re-instrument their code and configure new agents to be able to emit telemetry data to the new tool of choice.</li></ol><p><img src=images/observability-in-the-past.png alt=observability-in-the-past></p><p>Recognizing the need for standardization and portability, the cloud community came together, and two open-source projects were born:</p><ol><li><strong>OpenTracing</strong> (a Cloud Native Computing Foundation (CNCF) project): This provided a vendor-neutral API for sending telemetry data over to an Observability back-end; however, it relied on developers to implement their own libraries to meet the specification.</li><li><strong>OpenCensus</strong> (a Google Open Source community project): This provided a set of language-specific libraries that developers could use to instrument their code and send to any one of their supported back-ends.</li></ol><p>To standardize things further, in May 2019, <strong>OpenCensus and OpenTracing were merged to form &ldquo;OpenTelemetry&rdquo;</strong> (OTel for short). As a CNCF incubating project, OpenTelemetry takes the best of both worlds, and then some.</p><p><img src=images/opentelemetry-opentracing-opencensus.png alt=opentelemetry-opentracing-opencensus></p><h2 id=opentelemetry>OpenTelemetry</h2><p>OpenTelemetry is the mechanism by which application code is instrumented, to help make a system observable.</p><p>OTel&rsquo;s goal is to provide a set of standardized vendor-agnostic SDKs, APIs, and tools for ingesting, transforming, and sending data to an Observability back-end (i.e. open-source or commercial vendor).</p><h3 id=opentelemetry-signals>OpenTelemetry Signals</h3><p>In OpenTelemetry, a <strong>Signal</strong> refers to the categories of telemetry that are supported by the specification. It currently supports the Signals below, and more may be added in the future.</p><p><strong>Traces</strong> - Traces give us the big picture of what happens when a request is made by user or an application.</p><p><strong>Metrics</strong> - A metric is a measurement about a service, captured at runtime.</p><p><strong>Logs</strong> - A log is a timestamped text record, either structured (recommended) or unstructured, with metadata.</p><p><strong>Baggage</strong> - Baggage refers to contextual information that&rsquo;s passed between spans</p><h3 id=language-specific-instrumentation-libraries-vendor-agnostic>Language specific Instrumentation Libraries (vendor-agnostic)</h3><ul><li><a href=https://opentelemetry.io/docs/instrumentation/>OpenTelemetry code instrumentation is supported for many popular programming languages</a></li><li>Some programming languages support both auto-instrumentation and manual instrumentation while others may support only one of them based on language limitations.</li></ul><p>Checkout <a href=https://opentelemetry.io/docs/concepts/instrumenting/>instrumenting</a> for more details.</p><h3 id=collector-vendor-neutral>Collector (vendor-neutral)</h3><p>OpenTelemetry Collector (otel-collector) is a vendor-neutral component which allows telemetry data (signals) to be collected, processed upon and exported to an observability backend in their respective formats.</p><p>OpenTelemetry Collector can be customized using its configuration, an example configuration would look like:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#070>receivers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:#070>otlp</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#070>protocols</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:#070>grpc</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:#070>http</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#070>processors</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:#070>batch</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#070>exporters</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:#070>otlp</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#070>endpoint</span>:<span style=color:#bbb> </span>otelcol:4317<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#070>extensions</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:#070>health_check</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:#070>pprof</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:#070>zpages</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#070>service</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:#070>extensions</span>:<span style=color:#bbb> </span>[health_check,pprof,zpages]<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:#070>pipelines</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#070>traces</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:#070>receivers</span>:<span style=color:#bbb> </span>[otlp]<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:#070>processors</span>:<span style=color:#bbb> </span>[batch]<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:#070>exporters</span>:<span style=color:#bbb> </span>[otlp]<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#070>metrics</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:#070>receivers</span>:<span style=color:#bbb> </span>[otlp]<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:#070>processors</span>:<span style=color:#bbb> </span>[batch]<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:#070>exporters</span>:<span style=color:#bbb> </span>[otlp]<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#070>logs</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:#070>receivers</span>:<span style=color:#bbb> </span>[otlp]<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:#070>processors</span>:<span style=color:#bbb> </span>[batch]<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:#070>exporters</span>:<span style=color:#bbb> </span>[otlp]<span style=color:#bbb>
</span></span></span></code></pre></div><p>We can specify &ldquo;pipelines&rdquo; in the otel-collector, each for <strong>metrics</strong>, <strong>traces</strong> and <strong>logs</strong> which are comprised of:</p><ol><li><strong>Receivers:</strong> A receiver accepts data in a specified format, translates it into the internal format and passes it to processors and exporters defined in the applicable pipelines</li><li><strong>Processors:</strong> A processor pre-processes data before it is exported (e.g. modify attributes or sample) or helps ensure that data makes it through a pipeline successfully (e.g. batch/retry).</li><li><strong>Exporters:</strong> An exporter translates the internal format into another defined format.</li></ol><p><strong>Extensions:</strong> There is another type of component called &ldquo;extensions&rdquo;, which provides capabilities on top of the primary functionality of the collector. Generally, extensions are used for implementing components that can be added to the Collector, but which do not require direct access to telemetry data and are not part of the pipelines (like receivers, processors or exporters)</p><p>There are 2 flavors of otel-collector present:</p><ul><li><a href=https://github.com/open-telemetry/opentelemetry-collector>Core otel-collector</a>: This is the standard collector provided by the open-telemetry and have certain receivers, processors, exporters and extensions built-in for any generic usage.</li><li><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib>otel-collector-contrib</a>: This is a superset of standard otel-collector, this includes open source community contributed components for vendor specific data-formats. Use this if you want to have any vendor-specific observability backends or data sources (instrumentation, applications etc.) to support in your system.</li></ul><p><img src=images/opentelemetry-collector.png alt=opentelemetry-collector></p><h2 id=conclusion>Conclusion</h2><p>To conclude this, OpenTelemetry provides robust standards, rich set of libraries for various programming languages, and tools for instrumenting, collecting, transforming and exporting telemetry data to make the system observable.</p><p>Here is the general OpenTelemetry workflow diagram:</p><p><img src=images/opentelemetry-overview.png alt=opentelemetry-overview></p></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=../../tags/opentelemetry>opentelemetry</a></li><li><a href=../../tags/opentracing>opentracing</a></li><li><a href=../../tags/opencensus>opencensus</a></li></ul></nav></div><script id=diffblog-plugin-script async src=https://diff.blog/static/js/diffblog_plugin_v1.js></script>
<script>document.getElementById("diffblog-plugin-script").addEventListener("load",function(){DiffBlog("hhv3f1602vgc1ljqid62utggmyom9g2ujt9tm6gw74msobue5n")})</script><div id=disqus_thread></div><script>(function(){var e=document,t=e.createElement("script");t.src="https://lprakashv-tech-blog.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></article></main><footer><div style=display:flex><a class=soc href=https://www.linkedin.com/in/lprakashv/ title=Linkedin><i data-feather=linkedin></i></a>
<a class=border></a><a class=soc href=https://github.com/lprakashv title=GitHub><i data-feather=github></i></a>
<a class=border></a><a class=soc href=https://twitter.com/lprakashv/ title=Twitter><i data-feather=twitter></i></a>
<a class=border></a><a class=soc href="https://stackoverflow.com/users/4066802/lprakashv?tab=profile" title=stackoverflow><i data-feather=stackoverflow></i></a>
<a class=border></a></div><div class=footer-info>2022 © Lalit Prakash Vatsal |</div></footer><script>feather.replace()</script></div><div class=content-side><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3468549466738898" crossorigin=anonymous></script>
<ins class=adsbygoogle style=display:block data-ad-client=ca-pub-3468549466738898 data-ad-slot=6861065745 data-ad-format=auto data-full-width-responsive=true></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></body></html>